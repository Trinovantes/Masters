for (o = initObj(); cond; free(o)) {
    foo();
}